<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>SM</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3/dist/css/uikit.min.css" />
	<script src="https://cdn.jsdelivr.net/npm/uikit@3/dist/js/uikit.min.js"></script>
</head>
<body>
	<form class="uk-container" method="post" action="">
        <fieldset class="uk-fieldset">
            <legend class="uk-legend uk-text-center">SM</legend>
            <div class="uk-grid-collapse uk-flex-middle" uk-grid>
                <div class="uk-width-1-4 uk-width-1-6@s uk-padding-small uk-text-right">算法</div>
                <div class="uk-width-expand">
                    <select class="uk-select" name="sm">
                        <option value="SM3">SM3</option>
                        <option value="SM4">SM4</option>
                    </select>
                </div>
            </div>
            <div class="uk-grid-collapse uk-flex-middle" uk-grid>
                <div class="uk-width-1-4 uk-width-1-6@s uk-padding-small uk-text-right">操作</div>
                <div class="uk-width-expand">
                    <select class="uk-select" name="action">
                        <option value="encrypt">encrypt</option>
                        <option value="decrypt">decrypt</option>
                    </select>
                </div>
            </div>
            <div class="uk-grid-collapse uk-flex-middle" uk-grid>
                <div class="uk-width-1-4 uk-width-1-6@s uk-padding-small uk-text-right">密钥</div>
                <div class="uk-width-expand"><input class="uk-input" type="text" name="key"></div>
            </div>
            <div class="uk-grid-collapse uk-flex-middle" uk-grid>
                <div class="uk-width-1-4 uk-width-1-6@s uk-padding-small uk-text-right">数据</div>
                <div class="uk-width-expand">
                    <textarea class="uk-textarea" rows="5" name="text"></textarea>
                 </div>
            </div>
            <div class="uk-text-center">
                 <button class="uk-button uk-button-primary uk-button-large" type="button">submit</button>
            </div>
        </fieldset>
        <div id="response"></div>
    </form>
	<script type="text/javascript">
		var SM3=function(r){function n(e){if(t[e])return t[e].exports;var o=t[e]={i:e,l:!1,exports:{}};return r[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};return n.m=r,n.c=t,n.d=function(r,t,e){n.o(r,t)||Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:e})},n.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(t,"a",t),t},n.o=function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},n.p="",n(n.s=6)}({1:function(r,n,t){"use strict";function e(r,n){for(var t=[],e=~~(n/8),o=n%8,u=0,i=r.length;u<i;u++)t[u]=(r[(u+e)%i]<<o&255)+(r[(u+e+1)%i]>>>8-o&255);return t}function o(r,n){for(var t=[],e=r.length-1;e>=0;e--)t[e]=255&(r[e]^n[e]);return t}function u(r,n){for(var t=[],e=r.length-1;e>=0;e--)t[e]=r[e]&n[e]&255;return t}function i(r,n){for(var t=[],e=r.length-1;e>=0;e--)t[e]=255&(r[e]|n[e]);return t}function s(r,n){for(var t=[],e=0,o=r.length-1;o>=0;o--){var u=r[o]+n[o]+e;u>255?(e=1,t[o]=255&u):(e=0,t[o]=255&u)}return t}function c(r){for(var n=[],t=r.length-1;t>=0;t--)n[t]=255&~r[t];return n}function f(r){return o(o(r,e(r,9)),e(r,17))}function a(r){return o(o(r,e(r,15)),e(r,23))}function l(r,n,t,e){return e>=0&&e<=15?o(o(r,n),t):i(i(u(r,n),u(r,t)),u(n,t))}function p(r,n,t,e){return e>=0&&e<=15?o(o(r,n),t):i(u(r,n),u(c(r),t))}function h(r,n){for(var t=[],u=[],i=0;i<16;i++){var c=4*i;t.push(n.slice(c,c+4))}for(var h=16;h<68;h++)t.push(o(o(a(o(o(t[h-16],t[h-9]),e(t[h-3],15))),e(t[h-13],7)),t[h-6]));for(var v=0;v<64;v++)u.push(o(t[v],t[v+4]));for(var g=[121,204,69,25],d=[122,135,157,138],x=r.slice(0,4),y=r.slice(4,8),b=r.slice(8,12),w=r.slice(12,16),m=r.slice(16,20),j=r.slice(20,24),A=r.slice(24,28),O=r.slice(28,32),P=void 0,I=void 0,S=void 0,_=void 0,E=0;E<64;E++){var M=E>=0&&E<=15?g:d;P=e(s(s(e(x,12),m),e(M,E)),7),I=o(P,e(x,12)),S=s(s(s(l(x,y,b,E),w),I),u[E]),_=s(s(s(p(m,j,A,E),O),P),t[E]),w=b,b=e(y,9),y=x,x=S,O=A,A=e(j,19),j=m,m=f(_)}return o([].concat(x,y,b,w,m,j,A,O),r)}r.exports=function(r){var n=8*r.length,t=n%512;t=t>=448?512-t%448-1:448-t-1;for(var e=new Array((t-7)/8),o=0,u=e.length;o<u;o++)e[o]=0;var i=[];n=n.toString(2);for(var s=7;s>=0;s--)if(n.length>8){var c=n.length-8;i[s]=parseInt(n.substr(c),2),n=n.substr(0,c)}else n.length>0?(i[s]=parseInt(n,2),n=""):i[s]=0;for(var f=[].concat(r,[128],e,i),a=f.length/64,l=[115,128,22,111,73,20,178,185,23,36,66,215,218,138,6,0,169,111,48,188,22,49,56,170,227,141,238,77,176,251,14,78],p=0;p<a;p++){var v=64*p;l=h(l,f.slice(v,v+64))}return l}},6:function(r,n,t){"use strict";function e(r){return r.map(function(r){return r=r.toString(16),1===r.length?"0"+r:r}).join("")}function o(r){for(var n=[],t=0,e=r.length;t<e;t++){var o=r.codePointAt(t);if(o<=127)n.push(o);else if(o<=2047)n.push(192|o>>>6),n.push(128|63&o);else if(o<=55295||o>=57344&&o<=65535)n.push(224|o>>>12),n.push(128|o>>>6&63),n.push(128|63&o);else{if(!(o>=65536&&o<=1114111))throw n.push(o),new Error("input is not supported");t++,n.push(240|o>>>18&28),n.push(128|o>>>12&63),n.push(128|o>>>6&63),n.push(128|63&o)}}return n}var u=t(1);r.exports=function(r){return r="string"==typeof r?o(r):Array.prototype.slice.call(r),e(u(r))}}});
		let sm=document.querySelector('select[name=sm]');
		let action=document.querySelector('select[name=action]');
		let key=document.querySelector('input[name=key]');
		let text=document.querySelector('textarea[name=text]');
		document.querySelector('button').addEventListener("click", function(){
			if(sm.value=="SM3"){
				let data=text.value;
				if(key.value.length>0){ data=key.value+data;}
				document.querySelector('#response').insertAdjacentHTML('afterbegin','<fieldset><legend>'+new Date().toISOString().substr(0,19).replace('T',' ')
                    +'</legend><textarea readonly disabled style="box-sizing:border-box;border:1px dashed #ccc;padding:10px;width:100%;"></textarea></fieldset>');
                let textarea=document.querySelector('#response textarea');
                textarea.innerText=SM3(data);
                textarea.style.height = textarea.scrollHeight + 'px';
			}
		});
    </script>

</body>
</html>